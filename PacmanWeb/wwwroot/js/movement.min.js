function SetElement(n,t,i){var r=document.getElementById(n);context.fillStyle="black";context.fillRect(t*spriteX,i*spriteY,spriteX,spriteY);context.drawImage(r,t*spriteX,i*spriteY,spriteX,spriteY)}var canvas;const connection=(new signalR.HubConnectionBuilder).withUrl("/pacman").build();connection.start().catch(n=>console.error(n.toString()));canvas=document.getElementById("map");context=canvas.getContext("2d");var width=canvas.width,height=canvas.height,w=Number(document.getElementById("width").innerText),h=Number(document.getElementById("height").innerText),spriteX=width/w,spriteY=height/h;document.getElementById("start").addEventListener("click",n=>{var t=document.getElementById("id").innerText;connection.invoke("Start",t).catch(n=>console.error(n.toString()));n.preventDefault()});addEventListener("keydown",function(n){if(n.keyCode===32){var t=document.getElementById("id").innerText;connection.invoke("Start",t).catch(n=>console.error(n.toString()))}n.preventDefault()});document.getElementById("stop").addEventListener("click",n=>{var t=document.getElementById("id").innerText;connection.invoke("Stop",t).catch(n=>console.error(n.toString()));n.preventDefault()});addEventListener("keydown",function(n){if(n.keyCode===13){var t=document.getElementById("id").innerText;connection.invoke("Stop",t).catch(n=>console.error(n.toString()))}n.preventDefault()});addEventListener("keydown",function(n){if(n.keyCode>36&&n.keyCode<41){var t=document.getElementById("id").innerText;connection.invoke("PacmanDirection",n.keyCode,t).catch(n=>console.error(n.toString()))}n.preventDefault()});document.getElementById("restart").addEventListener("click",n=>{var t=document.getElementById("id").innerText;connection.invoke("Restart",t).catch(n=>console.error(n.toString()));n.preventDefault()});connection.on("Move",(n,t,i)=>{SetElement(i,n,t)});connection.on("DrawMap",n=>{for(var i,t=0;t<n.length;t++)for(i=0;i<n[t].length;i++)SetElement(n[t][i],t,i)});connection.on("Level",n=>{var t=document.getElementById("level");t.innerText=n});connection.on("Live",n=>{var t=document.getElementById("live");t.innerText=n});connection.on("Score",n=>{var t=document.getElementById("score");t.innerText=n});connection.on("add",()=>{var n=document.getElementById("id").innerText;connection.invoke("AddInGroup",n).catch(n=>console.error(n.toString()))});