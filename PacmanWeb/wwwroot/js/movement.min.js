function SetElement(n,t,i){var r=document.getElementById(n);context.fillStyle="black";context.fillRect(t*spriteX,i*spriteY,spriteX,spriteY);context.drawImage(r,t*spriteX,i*spriteY,spriteX,spriteY)}function UpdateLevel(n){var t=document.getElementById("level");t.innerText=n}function InitMap(){for(var r="energaizer",t="littlegoal",n=1,i=2;i<14;i++)SetElement(t,i,n);for(i=16;i<28;i++)SetElement(t,i,n);for(n=2,SetElement(r,2,n),SetElement(t,7,n),SetElement(t,13,n),SetElement(t,16,n),SetElement(t,22,n),SetElement(r,27,n),n=3,SetElement(t,2,n),SetElement(t,7,n),SetElement(t,13,n),SetElement(t,16,n),SetElement(t,22,n),SetElement(t,27,n),n=4,SetElement(t,2,n),SetElement(t,7,n),SetElement(t,13,n),SetElement(t,16,n),SetElement(t,22,n),SetElement(t,27,n),n=5,i=2;i<28;i++)SetElement(t,i,n);for(n=6,SetElement(t,2,n),SetElement(t,7,n),SetElement(t,10,n),SetElement(t,19,n),SetElement(t,22,n),SetElement(t,27,n),n=7,SetElement(t,2,n),SetElement(t,7,n),SetElement(t,10,n),SetElement(t,19,n),SetElement(t,22,n),SetElement(t,27,n),n=8,i=2;i<8;i++)SetElement(t,i,n);for(i=10;i<14;i++)SetElement(t,i,n);for(i=16;i<20;i++)SetElement(t,i,n);for(i=22;i<28;i++)SetElement(t,i,n);for(n=9,SetElement(t,7,n),SetElement(t,22,n),n=10,SetElement(t,7,n),SetElement(t,22,n),n=11,SetElement(t,7,n),SetElement("blinky",15,n),SetElement(t,22,n),n=12,SetElement(t,7,n),SetElement(t,22,n),n=13,SetElement(t,7,n),SetElement(t,22,n),n=14,SetElement(t,7,n),SetElement(t,22,n),n=15,SetElement(t,7,n),SetElement("inky",13,n),SetElement("clyde",15,n),SetElement("pinky",17,n),SetElement(t,22,n),n=16,SetElement(t,7,n),SetElement(t,22,n),n=17,SetElement(t,7,n),SetElement(t,22,n),n=18,SetElement(t,7,n),SetElement(t,22,n),n=19,SetElement(t,7,n),SetElement(t,22,n),n=20,i=2;i<14;i++)SetElement(t,i,n);for(i=16;i<28;i++)SetElement(t,i,n);for(n=21,SetElement(t,2,n),SetElement(t,7,n),SetElement(t,13,n),SetElement(t,16,n),SetElement(t,22,n),SetElement(t,27,n),n=22,SetElement(t,2,n),SetElement(t,7,n),SetElement(t,13,n),SetElement(t,16,n),SetElement(t,22,n),SetElement(t,27,n),n=23,SetElement(r,2,n),i=3;i<5;i++)SetElement(t,i,n);for(i=7;i<14;i++)SetElement(t,i,n);for(SetElement("pacman",15,n),i=16;i<23;i++)SetElement(t,i,n);for(i=25;i<27;i++)SetElement(t,i,n);for(SetElement(r,27,n),n=24,SetElement(t,4,n),SetElement(t,7,n),SetElement(t,10,n),SetElement(t,19,n),SetElement(t,22,n),SetElement(t,25,n),n=25,SetElement(t,4,n),SetElement(t,7,n),SetElement(t,10,n),SetElement(t,19,n),SetElement(t,22,n),SetElement(t,25,n),n=26,i=2;i<8;i++)SetElement(t,i,n);for(i=10;i<14;i++)SetElement(t,i,n);for(i=16;i<20;i++)SetElement(t,i,n);for(i=22;i<28;i++)SetElement(t,i,n);for(n=27,SetElement(t,2,n),SetElement(t,13,n),SetElement(t,16,n),SetElement(t,27,n),n=28,SetElement(t,2,n),SetElement(t,13,n),SetElement(t,16,n),SetElement(t,27,n),n=29,i=2;i<28;i++)SetElement(t,i,n)}var canvas;const connection=(new signalR.HubConnectionBuilder).withUrl("/game").build();connection.start().catch(n=>console.error(n.toString()));canvas=document.getElementById("map");context=canvas.getContext("2d");var width=canvas.width,height=canvas.height,spriteX=width/30,spriteY=height/31;document.getElementById("start").addEventListener("click",n=>{connection.invoke("Start").catch(n=>console.error(n.toString())),n.preventDefault()});addEventListener("keydown",function(n){n.keyCode==32&&connection.invoke("Start").catch(n=>console.error(n.toString()));n.preventDefault()});document.getElementById("stop").addEventListener("click",n=>{connection.invoke("Stop").catch(n=>console.error(n.toString())),n.preventDefault()});addEventListener("keydown",function(n){n.keyCode==13&&connection.invoke("Stop").catch(n=>console.error(n.toString()));n.preventDefault()});addEventListener("keydown",function(n){n.keyCode>36&&n.keyCode<41&&connection.invoke("PacmanDirection",n.keyCode).catch(n=>console.error(n.toString()));n.preventDefault()});connection.on("Move",(n,t,i)=>{SetElement(i,n,t)});connection.on("PacmanIsKilled",n=>{var t=document.getElementById("live");t.innerText=n});connection.on("PacmanMove",(n,t,i,r)=>{var u=document.getElementById("score");u.innerText=r;SetElement(i,n,t)});connection.on("Init",n=>{InitMap(),UpdateLevel(n)});