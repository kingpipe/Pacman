function SetElement(n,t,i){var r=document.getElementById(n);context.fillStyle="black";context.fillRect(t*spriteX,i*spriteY,spriteX,spriteY);context.drawImage(r,t*spriteX,i*spriteY,spriteX,spriteY)}var tryingToReconnect=!1,canvas;const connection=(new signalR.HubConnectionBuilder).withUrl("/pacman").build();connection.start().catch(n=>console.error(n.toString()));canvas=document.getElementById("map");context=canvas.getContext("2d");var width=canvas.width,height=canvas.height,w=Number(document.getElementById("width").innerText),h=Number(document.getElementById("height").innerText),spriteX=width/w,spriteY=height/h;document.getElementById("start").addEventListener("click",n=>{connection.invoke("Start").catch(n=>console.error(n.toString())),n.preventDefault()});addEventListener("keydown",function(n){n.keyCode==32&&connection.invoke("Start").catch(n=>console.error(n.toString()));n.preventDefault()});document.getElementById("stop").addEventListener("click",n=>{connection.invoke("Stop").catch(n=>console.error(n.toString())),n.preventDefault()});addEventListener("keydown",function(n){n.keyCode==13&&connection.invoke("Stop").catch(n=>console.error(n.toString()));n.preventDefault()});addEventListener("keydown",function(n){n.keyCode>36&&n.keyCode<41&&connection.invoke("PacmanDirection",n.keyCode).catch(n=>console.error(n.toString()));n.preventDefault()});document.getElementById("restart").addEventListener("click",n=>{connection.invoke("Restart").catch(n=>console.error(n.toString())),n.preventDefault()});connection.on("Move",(n,t,i)=>{SetElement(i,n,t)});connection.on("DrawMap",(n,t)=>{var i,r;for(UpdateLevel(t),i=0;i<n.length;i++)for(r=0;r<n[i].length;r++)SetElement(n[i][r],i,r)});connection.on("Level",n=>{var t=document.getElementById("level");t.innerText=n});connection.on("Live",n=>{var t=document.getElementById("live");t.innerText=n;n==0&&connection.invoke("AddinDB").catch(n=>console.error(n.toString()))});connection.on("Score",n=>{var t=document.getElementById("score");t.innerText=n});